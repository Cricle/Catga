# Catga OrderSystem æµ‹è¯•æŒ‡å—

å®Œæ•´çš„æµ‹è¯•è„šæœ¬é›†åˆï¼Œç”¨äºéªŒè¯ OrderSystem ç¤ºä¾‹çš„æ‰€æœ‰åŠŸèƒ½ã€‚

---

## ğŸ“‹ æµ‹è¯•è„šæœ¬æ¦‚è§ˆ

| è„šæœ¬ | ç”¨é€” | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| `quick-test.ps1` | å¿«é€Ÿæµ‹è¯• 5 ä¸ªæ ¸å¿ƒåŠŸèƒ½ | æœåŠ¡å·²è¿è¡Œï¼Œå¿«é€ŸéªŒè¯ |
| `test-ordersystem-full.ps1` | å…¨é¢æµ‹è¯•æ‰€æœ‰ API å’Œé¡µé¢ | å®Œæ•´åŠŸèƒ½éªŒè¯ |
| `run-and-test.ps1` | ä¸€é”®å¯åŠ¨æœåŠ¡å¹¶æµ‹è¯• | ä»é›¶å¼€å§‹è‡ªåŠ¨åŒ–æµ‹è¯• |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èç”¨äºå·²è¿è¡Œçš„æœåŠ¡ï¼‰

```powershell
# 1. å¯åŠ¨æœåŠ¡ï¼ˆå¦‚æœæœªå¯åŠ¨ï¼‰
cd examples/OrderSystem.AppHost
dotnet run

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œå¿«é€Ÿæµ‹è¯•
.\quick-test.ps1
```

**è¾“å‡ºç¤ºä¾‹**:
```
âš¡ Catga OrderSystem å¿«é€Ÿæµ‹è¯•

âœ… æœåŠ¡è¿è¡Œä¸­

ğŸ§ª æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½...

1ï¸âƒ£  åˆ›å»ºè®¢å•... âœ…
2ï¸âƒ£  æŸ¥è¯¢è®¢å•... âœ…
3ï¸âƒ£  Debugger API... âœ… (3 ä¸ªæµ)
4ï¸âƒ£  é¡µé¢è®¿é—®... âœ…
5ï¸âƒ£  Debugger UI... âœ…

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ‰ å…¨éƒ¨é€šè¿‡! (5/5, 100%)
```

---

### æ–¹å¼ 2: å…¨é¢æµ‹è¯•ï¼ˆæ¨èç”¨äºåŠŸèƒ½éªŒè¯ï¼‰

```powershell
# 1. å¯åŠ¨æœåŠ¡ï¼ˆå¦‚æœæœªå¯åŠ¨ï¼‰
cd examples/OrderSystem.AppHost
dotnet run

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œå…¨é¢æµ‹è¯•
.\test-ordersystem-full.ps1
```

**æµ‹è¯•è¦†ç›–**:
- âœ… å¥åº·æ£€æŸ¥ (3 ä¸ªç«¯ç‚¹)
- âœ… API ç«¯ç‚¹ (è®¢å•åˆ›å»º/æŸ¥è¯¢/å–æ¶ˆï¼ŒæˆåŠŸå’Œå¤±è´¥åœºæ™¯)
- âœ… Debugger API (æ¶ˆæ¯æµ/ç»Ÿè®¡/äº‹ä»¶)
- âœ… é¡µé¢è®¿é—® (ä¸»é¡µ/UI/Debugger/æ—¶é—´æ—…è¡Œ/æ–­ç‚¹/æ€§èƒ½)
- âœ… é™æ€èµ„æº (JS/CSS åº“æ–‡ä»¶)
- âœ… Swagger (API æ–‡æ¡£)
- âœ… SignalR (å®æ—¶é€šä¿¡)

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ§ª Catga OrderSystem å…¨é¢æµ‹è¯•
================================

ğŸ“Š 1. å¥åº·æ£€æŸ¥æµ‹è¯•
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Health Check (/health)
  âœ… Liveness Check (/health/live)
  âœ… Readiness Check (/health/ready)

ğŸ”Œ 2. API ç«¯ç‚¹æµ‹è¯•
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… åˆ›å»ºè®¢å• - æˆåŠŸåœºæ™¯ (è®¢å•ID: ORD-12345)
  âœ… åˆ›å»ºè®¢å• - å¤±è´¥åœºæ™¯ (åº“å­˜ä¸è¶³)
  âœ… æŸ¥è¯¢è®¢å• (ID: ORD-12345)
  âœ… å–æ¶ˆè®¢å• (ID: ORD-12345)

... (æ›´å¤šæµ‹è¯•ç»“æœ)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š æµ‹è¯•ç»“æœç»Ÿè®¡
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ€»æµ‹è¯•æ•°: 28
é€šè¿‡: 28 âœ…
å¤±è´¥: 0 âŒ
é€šè¿‡ç‡: 100%

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼

å¯è®¿é—®çš„ URL:
  â€¢ OrderSystem UI: http://localhost:5000
  â€¢ Catga Debugger: http://localhost:5000/debugger/index.html
  â€¢ Swagger API: http://localhost:5000/swagger
  â€¢ Aspire Dashboard: http://localhost:15888
```

---

### æ–¹å¼ 3: ä¸€é”®å¯åŠ¨å’Œæµ‹è¯•ï¼ˆæ¨èç”¨äºè‡ªåŠ¨åŒ–ï¼‰

```powershell
# è‡ªåŠ¨æ„å»ºã€å¯åŠ¨æœåŠ¡ã€è¿è¡Œæµ‹è¯•ã€æ¸…ç†
.\run-and-test.ps1
```

**æµç¨‹**:
1. âœ… æ£€æŸ¥ç°æœ‰è¿›ç¨‹
2. âœ… æ„å»ºé¡¹ç›®
3. âœ… åå°å¯åŠ¨æœåŠ¡
4. âœ… ç­‰å¾…æœåŠ¡å°±ç»ª
5. âœ… è¿è¡Œå…¨é¢æµ‹è¯•
6. âœ… è¯¢é—®æ˜¯å¦ä¿æŒæœåŠ¡è¿è¡Œ

---

## ğŸ“Š æµ‹è¯•è¦†ç›–è¯¦æƒ…

### 1. å¥åº·æ£€æŸ¥ (3 ä¸ªç«¯ç‚¹)

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `/health` | ç»¼åˆå¥åº·æ£€æŸ¥ |
| `/health/live` | å­˜æ´»æ¢æµ‹ (Liveness) |
| `/health/ready` | å°±ç»ªæ¢æµ‹ (Readiness) |

### 2. API ç«¯ç‚¹ (è®¢å•ç®¡ç†)

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| `/api/orders` | POST | åˆ›å»ºè®¢å•ï¼ˆæˆåŠŸåœºæ™¯ï¼‰ |
| `/api/orders` | POST | åˆ›å»ºè®¢å•ï¼ˆå¤±è´¥åœºæ™¯ - åº“å­˜ä¸è¶³ï¼‰ |
| `/api/orders/{id}` | GET | æŸ¥è¯¢è®¢å• |
| `/api/orders/{id}/cancel` | POST | å–æ¶ˆè®¢å• |

### 3. Debugger API (è°ƒè¯•ç›‘æ§)

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| `/debug-api/flows` | GET | è·å–æ‰€æœ‰æ¶ˆæ¯æµ |
| `/debug-api/stats` | GET | è·å–ç»Ÿè®¡ä¿¡æ¯ |
| `/debug-api/flows/{id}` | GET | è·å–æ¶ˆæ¯æµè¯¦æƒ… |
| `/debug-api/flows/{id}/events` | GET | è·å–æµäº‹ä»¶ |

### 4. é¡µé¢è®¿é—® (UI)

| é¡µé¢ | è¯´æ˜ |
|------|------|
| `/` | ä¸»é¡µ |
| `/index.html` | OrderSystem UI |
| `/debugger/index.html` | Debugger ä¸»é¡µ |
| `/debugger/replay-player.html` | æ—¶é—´æ—…è¡Œè°ƒè¯•å™¨ |
| `/debugger/breakpoints.html` | æ–­ç‚¹è°ƒè¯•å™¨ |
| `/debugger/profiling.html` | æ€§èƒ½åˆ†æå™¨ |

### 5. é™æ€èµ„æº (JS/CSS)

| èµ„æº | è¯´æ˜ |
|------|------|
| `/lib/alpine.min.js` | Alpine.js (OrderSystem) |
| `/lib/tailwind.js` | Tailwind CSS (OrderSystem) |
| `/lib/signalr.min.js` | SignalR (Debugger) |

### 6. Swagger (API æ–‡æ¡£)

| é¡µé¢ | è¯´æ˜ |
|------|------|
| `/swagger/index.html` | Swagger UI |
| `/swagger/v1/swagger.json` | OpenAPI è§„èŒƒ |

### 7. SignalR (å®æ—¶é€šä¿¡)

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `/debugger-hub/negotiate` | SignalR è¿æ¥åå•† |

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1: æœåŠ¡å¯åŠ¨è¶…æ—¶

**ç—‡çŠ¶**:
```
âŒ æœåŠ¡å¯åŠ¨è¶…æ—¶
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :5000
netstat -ano | findstr :15888

# 2. æ‰‹åŠ¨å¯åŠ¨æŸ¥çœ‹æ—¥å¿—
cd examples/OrderSystem.AppHost
dotnet run

# 3. æ£€æŸ¥ Aspire Dashboard æ˜¯å¦å¯åŠ¨
# è®¿é—® http://localhost:15888
```

---

### é—®é¢˜ 2: æµ‹è¯•å¤±è´¥

**ç—‡çŠ¶**:
```
âŒ åˆ›å»ºè®¢å• - æˆåŠŸåœºæ™¯ (é”™è¯¯: ...)
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
# æµ‹è¯•è„šæœ¬ä¼šæ˜¾ç¤ºå…·ä½“é”™è¯¯

# 2. æ£€æŸ¥æœåŠ¡æ—¥å¿—
# åœ¨è¿è¡Œ dotnet run çš„ç»ˆç«¯æŸ¥çœ‹æ—¥å¿—

# 3. æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:5000/health
```

---

### é—®é¢˜ 3: é¡µé¢æ— æ³•è®¿é—®

**ç—‡çŠ¶**:
```
âŒ OrderSystem UI (/index.html) (é”™è¯¯: ...)
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æ£€æŸ¥é™æ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls examples/OrderSystem.Api/wwwroot/index.html

# 2. æ£€æŸ¥é™æ€æ–‡ä»¶ä¸­é—´ä»¶é…ç½®
# Program.cs åº”è¯¥æœ‰: app.UseStaticFiles()

# 3. æ‰‹åŠ¨è®¿é—®é¡µé¢
Start-Process "http://localhost:5000/index.html"
```

---

### é—®é¢˜ 4: Debugger UI 404

**ç—‡çŠ¶**:
```
âŒ Debugger ä¸»é¡µ (/debugger/index.html) (çŠ¶æ€ç : 404)
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æ£€æŸ¥ Debugger é™æ€æ–‡ä»¶
ls src/Catga.Debugger.AspNetCore/wwwroot/debugger/index.html

# 2. æ£€æŸ¥ Debugger é…ç½®
# Program.cs åº”è¯¥æœ‰: app.MapCatgaDebugger("/debug")

# 3. æ­£ç¡®çš„è®¿é—®è·¯å¾„
# http://localhost:5000/debugger/index.html
```

---

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

åŸºäºå…¨é¢æµ‹è¯•çš„æ€§èƒ½æ•°æ®ï¼š

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **æ€»æµ‹è¯•æ•°** | 28 |
| **æµ‹è¯•æ‰§è¡Œæ—¶é—´** | ~10-15 ç§’ |
| **æœåŠ¡å¯åŠ¨æ—¶é—´** | ~5-10 ç§’ |
| **API å“åº”æ—¶é—´** | < 100ms (æœ¬åœ°) |
| **é¡µé¢åŠ è½½æ—¶é—´** | < 500ms (æœ¬åœ°) |

---

## ğŸ¯ CI/CD é›†æˆ

### GitHub Actions ç¤ºä¾‹

```yaml
name: Test OrderSystem

on: [push, pull_request]

jobs:
  test:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup .NET
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '9.0.x'

      - name: Build
        run: dotnet build

      - name: Run Tests
        run: .\run-and-test.ps1
        shell: pwsh
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [OrderSystem ç¤ºä¾‹æ–‡æ¡£](examples/README-ORDERSYSTEM.md)
- [Catga Debugger æŒ‡å—](docs/guides/debugger-aspire-integration.md)
- [Aspire é›†æˆæŒ‡å—](ASPIRE-INTEGRATION-PLAN.md)

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å®šæœŸè¿è¡Œæµ‹è¯•
```powershell
# æ¯æ¬¡ä¿®æ”¹åè¿è¡Œå¿«é€Ÿæµ‹è¯•
.\quick-test.ps1

# æ¯æ¬¡æäº¤å‰è¿è¡Œå…¨é¢æµ‹è¯•
.\test-ordersystem-full.ps1
```

### 2. ç›‘æ§æµ‹è¯•é€šè¿‡ç‡
- ç›®æ ‡: ä¿æŒ 100% é€šè¿‡ç‡
- å¦‚æœé€šè¿‡ç‡ < 90%ï¼Œç«‹å³è°ƒæŸ¥
- è®°å½•å¤±è´¥çš„æµ‹è¯•è¯¦æƒ…

### 3. ä½¿ç”¨æµ‹è¯•è„šæœ¬è¿›è¡Œå¼€å‘
```powershell
# å¼€å‘æ—¶ä¿æŒæœåŠ¡è¿è¡Œ
cd examples/OrderSystem.AppHost
dotnet watch run

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸æ–­è¿è¡Œå¿«é€Ÿæµ‹è¯•
while ($true) {
    .\quick-test.ps1
    Start-Sleep -Seconds 10
}
```

---

## ğŸ‰ æ€»ç»“

è¿™å¥—æµ‹è¯•è„šæœ¬æä¾›äº†ï¼š

- âœ… **å¿«é€ŸéªŒè¯**: `quick-test.ps1` - 5 ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œ< 5 ç§’
- âœ… **å…¨é¢æµ‹è¯•**: `test-ordersystem-full.ps1` - 28 ä¸ªæµ‹è¯•ï¼Œ< 15 ç§’
- âœ… **è‡ªåŠ¨åŒ–**: `run-and-test.ps1` - ä¸€é”®å¯åŠ¨å’Œæµ‹è¯•
- âœ… **è¯¦ç»†æŠ¥å‘Š**: é€šè¿‡ç‡ã€å¤±è´¥è¯¦æƒ…ã€å»ºè®®
- âœ… **æ˜“äºé›†æˆ**: CI/CDã€å¼€å‘å·¥ä½œæµ

**ç¡®ä¿ Catga OrderSystem å§‹ç»ˆå¤„äºæœ€ä½³çŠ¶æ€ï¼** ğŸš€

