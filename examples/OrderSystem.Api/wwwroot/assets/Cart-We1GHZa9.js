import{k,r as b,v as l,C as t,x as _,u as e,z as a,L as d,a4 as f,ac as C,F as g,D as h,c as S,o as r}from"./vue-D6N10Y6x.js";import{u as q}from"./index-CapMTvft.js";import{u as I}from"./order-BnhFdJ91.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vuestic-w94gXuKD.js";const w={class:"cart"},x={class:"cart-header"},B={key:0},E={key:0,class:"empty"},N={key:1,class:"cart-content"},$={class:"cart-items"},z={class:"item-icon"},D={class:"item-info"},V={class:"item-qty"},F=["onClick"],O=["onClick"],Q={class:"item-subtotal"},P=["onClick"],R={class:"cart-summary"},T={class:"summary-row"},U={class:"summary-row"},j={class:"summary-total"},A={class:"total-price"},G=["disabled"],H=k({__name:"Cart",setup(J){const p=C(),o=q(),y=I(),i=b(!1),v=async()=>{if(!o.isEmpty){i.value=!0;try{await y.createOrder({customerId:"CUST-"+Date.now().toString(36),items:o.items.map(u=>({productId:u.productId,productName:u.name,quantity:u.quantity,unitPrice:u.price}))}),o.clear(),p.push("/orders")}finally{i.value=!1}}};return(u,s)=>{const c=f("va-icon");return r(),l("div",w,[t("div",x,[s[1]||(s[1]=t("h1",null,"购物车",-1)),e(o).isEmpty?_("",!0):(r(),l("p",B,"共 "+a(e(o).count)+" 件商品",1))]),e(o).isEmpty?(r(),l("div",E,[d(c,{name:"shopping_cart",size:"4rem",color:"secondary"}),s[3]||(s[3]=t("h2",null,"购物车是空的",-1)),s[4]||(s[4]=t("p",null,"快去选购心仪的商品吧",-1)),t("button",{class:"primary-btn",onClick:s[0]||(s[0]=n=>e(p).push("/"))},[d(c,{name:"store"}),s[2]||(s[2]=t("span",null,"去购物",-1))])])):(r(),l("div",N,[t("div",$,[(r(!0),l(g,null,h(e(o).items,n=>(r(),l("div",{key:n.productId,class:"cart-item"},[t("div",z,[d(c,{name:n.image,size:"1.5rem",color:"primary"},null,8,["name"])]),t("div",D,[t("h4",null,a(n.name),1),t("p",null,"¥"+a(n.price.toLocaleString()),1)]),t("div",V,[t("button",{class:"qty-btn",onClick:m=>e(o).updateQuantity(n.productId,n.quantity-1)},"−",8,F),t("span",null,a(n.quantity),1),t("button",{class:"qty-btn",onClick:m=>e(o).updateQuantity(n.productId,n.quantity+1)},"+",8,O)]),t("div",Q," ¥"+a((n.price*n.quantity).toLocaleString()),1),t("button",{class:"delete-btn",onClick:m=>e(o).removeItem(n.productId)},[d(c,{name:"delete"})],8,P)]))),128))]),t("div",R,[s[8]||(s[8]=t("h3",null,"订单摘要",-1)),t("div",T,[s[5]||(s[5]=t("span",null,"商品数量",-1)),t("span",null,a(e(o).count)+" 件",1)]),t("div",U,[s[6]||(s[6]=t("span",null,"商品金额",-1)),t("span",null,"¥"+a(e(o).total.toLocaleString()),1)]),s[9]||(s[9]=t("div",{class:"summary-row"},[t("span",null,"运费"),t("span",{class:"free"},"免运费")],-1)),t("div",j,[s[7]||(s[7]=t("span",null,"合计",-1)),t("span",A,"¥"+a(e(o).total.toLocaleString()),1)]),t("button",{class:"checkout-btn",disabled:i.value,onClick:v},[i.value?(r(),S(c,{key:0,name:"sync",class:"spin"})):_("",!0),t("span",null,a(i.value?"提交中...":"提交订单"),1)],8,G)])]))])}}}),Z=L(H,[["__scopeId","data-v-b01edb64"]]);export{Z as default};
