import{k as q,r as S,f as $,a as T,q as f,L as a,a4 as s,W as x,w as n,C as d,F as E,D as W,v as c,x as B,o as p,c as D,t as L,u as M}from"./vue-b2tVlrm7.js";import{u as j}from"./index-BhKAg6iL.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"create-order-form"},X={class:"total-section"},H={class:"form-actions"},J=q({__name:"CreateOrderForm",emits:["created","cancel"],setup(K,{emit:I}){const y=I,b=j(),l=S(!1),_={laptop:{name:"Laptop Pro",price:999.99},phone:{name:"SmartPhone X",price:699.99},tablet:{name:"Tablet Air",price:499.99},headphones:{name:"Wireless Headphones",price:199.99},watch:{name:"Smart Watch",price:299.99},keyboard:{name:"Mechanical Keyboard",price:149.99}},k=Object.entries(_).map(([o,e])=>({value:o,text:`${e.name} ($${e.price})`})),t=$({customerId:"CUST-001",customerName:"",customerEmail:"",items:[{productId:"laptop",productName:"Laptop Pro",quantity:1,unitPrice:999.99}]}),g=T(()=>t.items.reduce((o,e)=>o+e.quantity*e.unitPrice,0));function w(o){const e=_[t.items[o].productId];e&&(t.items[o].productName=e.name,t.items[o].unitPrice=e.price)}function N(){t.items.push({productId:"phone",productName:"SmartPhone X",quantity:1,unitPrice:699.99})}function O(o){t.items.splice(o,1)}async function F(){l.value=!0;try{await b.createOrder(t.customerId,t.items),y("created")}catch(o){alert("Failed to create order: "+o.message)}finally{l.value=!1}}async function P(){l.value=!0;try{await b.createOrderWithFlow(t.customerId,t.items),y("created")}catch(o){alert("Failed to create order: "+o.message)}finally{l.value=!1}}return(o,e)=>{const i=s("va-input"),C=s("va-divider"),h=s("va-select"),V=s("va-icon"),m=s("va-button"),U=s("va-form");return p(),f("div",A,[a(U,{onSubmit:x(F,["prevent"])},{default:n(()=>[a(i,{modelValue:t.customerId,"onUpdate:modelValue":e[0]||(e[0]=r=>t.customerId=r),label:"Customer ID",placeholder:"CUST-001",rules:[r=>!!r||"Required"],class:"mb-3"},null,8,["modelValue","rules"]),a(i,{modelValue:t.customerName,"onUpdate:modelValue":e[1]||(e[1]=r=>t.customerName=r),label:"Customer Name (Optional)",placeholder:"John Doe",class:"mb-3"},null,8,["modelValue"]),a(i,{modelValue:t.customerEmail,"onUpdate:modelValue":e[2]||(e[2]=r=>t.customerEmail=r),label:"Customer Email (Optional)",placeholder:"john@example.com",class:"mb-3"},null,8,["modelValue"]),a(C),e[9]||(e[9]=d("h4",null,"Order Items",-1)),(p(!0),f(E,null,W(t.items,(r,v)=>(p(),f("div",{key:v,class:"item-row"},[a(h,{modelValue:r.productId,"onUpdate:modelValue":[u=>r.productId=u,u=>w(v)],options:M(k),label:"Product",class:"product-select"},null,8,["modelValue","onUpdate:modelValue","options"]),a(i,{modelValue:r.quantity,"onUpdate:modelValue":u=>r.quantity=u,modelModifiers:{number:!0},type:"number",label:"Qty",min:1,max:99,class:"qty-input"},null,8,["modelValue","onUpdate:modelValue"]),t.items.length>1?(p(),D(m,{key:0,preset:"secondary",size:"small",onClick:u=>O(v)},{default:n(()=>[a(V,{name:"remove"})]),_:1},8,["onClick"])):L("",!0)]))),128)),a(m,{preset:"secondary",size:"small",onClick:N,class:"mb-3"},{default:n(()=>[a(V,{name:"add",class:"mr-1"}),e[4]||(e[4]=c(" Add Item ",-1))]),_:1}),a(C),d("div",X,[e[5]||(e[5]=d("span",null,"Total:",-1)),d("strong",null,"$"+B(g.value.toFixed(2)),1)]),d("div",H,[a(m,{onClick:e[3]||(e[3]=r=>o.$emit("cancel"))},{default:n(()=>[...e[6]||(e[6]=[c("Cancel",-1)])]),_:1}),a(m,{color:"primary",type:"submit",loading:l.value},{default:n(()=>[...e[7]||(e[7]=[c(" Create Order ",-1)])]),_:1},8,["loading"]),a(m,{color:"secondary",onClick:P,loading:l.value},{default:n(()=>[...e[8]||(e[8]=[c(" Create with Flow ",-1)])]),_:1},8,["loading"])])]),_:1})])}}}),Y=z(J,[["__scopeId","data-v-92e01920"]]);export{Y as C};
