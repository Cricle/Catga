import{u as S}from"./order-DzfrjeFA.js";import{k as B,r as m,a as L,G as N,q as i,C as s,L as a,w as l,a4 as u,x as n,v as _,F as k,D as x,o as v,d as O}from"./vue-C5tvXR9f.js";import{_ as V}from"./_plugin-vue_export-helper-BREQrZf2.js";const $={class:"admin-dashboard"},q={class:"stats-grid"},z={class:"stat-icon",style:{background:"#667eea"}},A={class:"stat-info"},E={class:"stat-value"},G={class:"stat-icon",style:{background:"#48bb78"}},M={class:"stat-info"},R={class:"stat-value"},T={class:"stat-icon",style:{background:"#ecc94b"}},j={class:"stat-info"},H={class:"stat-value"},J={class:"stat-icon",style:{background:"#4299e1"}},K={class:"stat-info"},P={class:"stat-value"},Q={class:"charts-row"},U={class:"status-bars"},W={class:"bar-label"},X={class:"bar-track"},Y={class:"recent-orders"},Z={class:"order-info"},ss={class:"order-id"},as={class:"order-amount"},ts={class:"quick-actions"},ls=B({__name:"Dashboard",setup(es){const g=S(),e=m(null),h=m([]),f=m(!1),w=["warning","info","primary","secondary","success","danger"],C=["待支付","已支付","处理中","已发货","已完成","已取消"],p=async()=>{f.value=!0;try{e.value=await g.fetchStats(),h.value=(await g.fetchOrders(10)).slice(0,5)}finally{f.value=!1}},D=L(()=>e.value?[{label:"待支付",value:e.value.pending,color:"#ecc94b"},{label:"已支付",value:e.value.paid,color:"#4299e1"},{label:"处理中",value:e.value.processing,color:"#667eea"},{label:"已发货",value:e.value.shipped,color:"#718096"},{label:"已完成",value:e.value.delivered,color:"#48bb78"},{label:"已取消",value:e.value.cancelled,color:"#f56565"}]:[]);return N(()=>{p(),setInterval(p,3e4)}),(F,t)=>{const c=u("va-icon"),d=u("va-card-content"),r=u("va-card"),b=u("va-card-title"),I=u("va-badge"),y=u("va-button");return v(),i("div",$,[t[10]||(t[10]=s("h1",null,"管理仪表盘",-1)),s("div",q,[a(r,{class:"stat-card"},{default:l(()=>[a(d,null,{default:l(()=>[s("div",z,[a(c,{name:"receipt_long",color:"#fff"})]),s("div",A,[t[1]||(t[1]=s("span",{class:"stat-label"},"总订单数",-1)),s("span",E,n(e.value?.total||0),1)])]),_:1})]),_:1}),a(r,{class:"stat-card"},{default:l(()=>[a(d,null,{default:l(()=>[s("div",G,[a(c,{name:"payments",color:"#fff"})]),s("div",M,[t[2]||(t[2]=s("span",{class:"stat-label"},"总收入",-1)),s("span",R,"¥"+n((e.value?.totalRevenue||0).toFixed(2)),1)])]),_:1})]),_:1}),a(r,{class:"stat-card"},{default:l(()=>[a(d,null,{default:l(()=>[s("div",T,[a(c,{name:"pending",color:"#fff"})]),s("div",j,[t[3]||(t[3]=s("span",{class:"stat-label"},"待处理",-1)),s("span",H,n((e.value?.pending||0)+(e.value?.paid||0)),1)])]),_:1})]),_:1}),a(r,{class:"stat-card"},{default:l(()=>[a(d,null,{default:l(()=>[s("div",J,[a(c,{name:"local_shipping",color:"#fff"})]),s("div",K,[t[4]||(t[4]=s("span",{class:"stat-label"},"运输中",-1)),s("span",P,n(e.value?.shipped||0),1)])]),_:1})]),_:1})]),s("div",Q,[a(r,{class:"chart-card"},{default:l(()=>[a(b,null,{default:l(()=>[...t[5]||(t[5]=[_("订单状态分布",-1)])]),_:1}),a(d,null,{default:l(()=>[s("div",U,[(v(!0),i(k,null,x(D.value,o=>(v(),i("div",{key:o.label,class:"status-bar-item"},[s("div",W,[s("span",null,n(o.label),1),s("span",null,n(o.value),1)]),s("div",X,[s("div",{class:"bar-fill",style:O({width:`${o.value/(e.value?.total||1)*100}%`,background:o.color})},null,4)])]))),128))])]),_:1})]),_:1}),a(r,{class:"chart-card"},{default:l(()=>[a(b,null,{default:l(()=>[...t[6]||(t[6]=[_("最近订单",-1)])]),_:1}),a(d,null,{default:l(()=>[s("div",Y,[(v(!0),i(k,null,x(h.value,o=>(v(),i("div",{key:o.orderId,class:"recent-order-item"},[s("div",Z,[s("code",ss,n(o.orderId),1),s("span",as,"¥"+n(o.totalAmount?.toFixed(2)),1)]),a(I,{text:C[o.status],color:w[o.status],size:"small"},null,8,["text","color"])]))),128))])]),_:1})]),_:1})]),a(r,null,{default:l(()=>[a(b,null,{default:l(()=>[...t[7]||(t[7]=[_("快捷操作",-1)])]),_:1}),a(d,null,{default:l(()=>[s("div",ts,[a(y,{onClick:t[0]||(t[0]=o=>F.$router.push("/admin/orders"))},{default:l(()=>[a(c,{name:"list_alt",class:"mr-2"}),t[8]||(t[8]=_(" 查看所有订单 ",-1))]),_:1}),a(y,{preset:"secondary",onClick:p,loading:f.value},{default:l(()=>[a(c,{name:"refresh",class:"mr-2"}),t[9]||(t[9]=_(" 刷新数据 ",-1))]),_:1},8,["loading"])])]),_:1})]),_:1})])}}}),rs=V(ls,[["__scopeId","data-v-966082f1"]]);export{rs as default};
