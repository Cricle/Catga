import{k as E,r as O,a as w,G,ag as Q,q as u,L as l,w as n,a4 as s,C as a,x as r,u as I,F as y,D as X,t as p,v as d,c as j,o as i,n as H}from"./vue-b2tVlrm7.js";import{u as J,S as W,a as Y}from"./index-BhKAg6iL.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-qEU9UwJ9.js";const h={key:0,class:"order-detail"},ee={class:"header-row"},te={class:"order-id"},ae={class:"lifecycle-section"},le={class:"lifecycle-steps"},ne={class:"info-grid"},oe={class:"info-item"},se={class:"info-item"},re={class:"amount"},ie={class:"info-item"},ue={key:0,class:"info-item"},de={key:1,class:"info-item"},ce={key:2,class:"info-item"},me={class:"tracking"},ve={key:3,class:"info-item"},pe={key:4,class:"info-item"},_e={class:"danger"},fe={class:"actions"},ye={key:1,class:"loading"},ke=E({__name:"OrderDetail",setup(be){const P=Q(),m=J(),_=O(!1),k=O(""),t=w(()=>m.currentOrder),D=[{name:"Pending",icon:"schedule"},{name:"Paid",icon:"payment"},{name:"Processing",icon:"settings"},{name:"Shipped",icon:"local_shipping"},{name:"Delivered",icon:"check_circle"}],f=w(()=>t.value?t.value.status===5?-1:Math.min(t.value.status,4):0),N=w(()=>!t.value||t.value.status===5?0:f.value/4*100),x=[{key:"productName",label:"Product"},{key:"productId",label:"SKU"},{key:"quantity",label:"Qty"},{key:"unitPrice",label:"Price"},{key:"subtotal",label:"Subtotal"}];async function A(){await m.payOrder(t.value.orderId,"Credit Card",`TXN-${Date.now()}`)}async function V(){await m.processOrder(t.value.orderId)}async function $(){await m.shipOrder(t.value.orderId,k.value||`TRK-${Date.now()}`),_.value=!1}async function M(){await m.deliverOrder(t.value.orderId)}async function b(){confirm("Are you sure you want to cancel this order?")&&await m.cancelOrder(t.value.orderId,"Cancelled by user")}return G(()=>{const g=P.params.id;m.fetchOrder(g)}),(g,e)=>{const v=s("va-icon"),c=s("va-button"),L=s("va-badge"),T=s("va-card-title"),F=s("va-progress-bar"),C=s("va-divider"),R=s("va-data-table"),B=s("va-card-content"),q=s("va-card"),U=s("va-input"),z=s("va-modal"),K=s("va-progress-circle");return t.value?(i(),u("div",h,[l(q,null,{default:n(()=>[l(T,null,{default:n(()=>[a("div",ee,[a("div",null,[l(c,{preset:"secondary",size:"small",onClick:e[0]||(e[0]=o=>g.$router.back())},{default:n(()=>[l(v,{name:"arrow_back"})]),_:1}),a("span",te,r(t.value.orderId),1),l(L,{text:I(Y)[t.value.status],color:I(W)[t.value.status],class:"ml-2"},null,8,["text","color"])])])]),_:1}),l(B,null,{default:n(()=>[a("div",ae,[e[5]||(e[5]=a("h4",null,"Order Lifecycle",-1)),l(F,{"model-value":N.value,color:t.value.status===5?"danger":"primary"},null,8,["model-value","color"]),a("div",le,[(i(),u(y,null,X(D,(o,S)=>a("div",{key:o.name,class:H(["step",{active:S<=f.value,current:S===f.value}])},[l(v,{name:o.icon,color:S<=f.value?"primary":"secondary"},null,8,["name","color"]),a("span",null,r(o.name),1)],2)),64))])]),l(C),a("div",ne,[a("div",oe,[e[6]||(e[6]=a("label",null,"Customer ID",-1)),a("span",null,r(t.value.customerId),1)]),a("div",se,[e[7]||(e[7]=a("label",null,"Total Amount",-1)),a("span",re,"$"+r(t.value.totalAmount.toFixed(2)),1)]),a("div",ie,[e[8]||(e[8]=a("label",null,"Created At",-1)),a("span",null,r(new Date(t.value.createdAt).toLocaleString()),1)]),t.value.paidAt?(i(),u("div",ue,[e[9]||(e[9]=a("label",null,"Paid At",-1)),a("span",null,r(new Date(t.value.paidAt).toLocaleString()),1)])):p("",!0),t.value.shippedAt?(i(),u("div",de,[e[10]||(e[10]=a("label",null,"Shipped At",-1)),a("span",null,r(new Date(t.value.shippedAt).toLocaleString()),1)])):p("",!0),t.value.trackingNumber?(i(),u("div",ce,[e[11]||(e[11]=a("label",null,"Tracking Number",-1)),a("span",me,r(t.value.trackingNumber),1)])):p("",!0),t.value.paymentMethod?(i(),u("div",ve,[e[12]||(e[12]=a("label",null,"Payment Method",-1)),a("span",null,r(t.value.paymentMethod),1)])):p("",!0),t.value.cancellationReason?(i(),u("div",pe,[e[13]||(e[13]=a("label",null,"Cancellation Reason",-1)),a("span",_e,r(t.value.cancellationReason),1)])):p("",!0)]),l(C),e[21]||(e[21]=a("h4",null,"Order Items",-1)),l(R,{items:t.value.items,columns:x},{"cell(unitPrice)":n(({value:o})=>[d(" $"+r(o.toFixed(2)),1)]),"cell(subtotal)":n(({row:o})=>[d(" $"+r((o.item.quantity*o.item.unitPrice).toFixed(2)),1)]),_:1},8,["items"]),l(C),a("div",fe,[t.value.status===0?(i(),u(y,{key:0},[l(c,{color:"success",onClick:A},{default:n(()=>[l(v,{name:"payment",class:"mr-2"}),e[14]||(e[14]=d(" Pay Order ",-1))]),_:1}),l(c,{color:"danger",onClick:b},{default:n(()=>[l(v,{name:"cancel",class:"mr-2"}),e[15]||(e[15]=d(" Cancel ",-1))]),_:1})],64)):t.value.status===1?(i(),u(y,{key:1},[l(c,{color:"secondary",onClick:V},{default:n(()=>[l(v,{name:"settings",class:"mr-2"}),e[16]||(e[16]=d(" Start Processing ",-1))]),_:1}),l(c,{color:"danger",onClick:b},{default:n(()=>[...e[17]||(e[17]=[d("Cancel",-1)])]),_:1})],64)):t.value.status===2?(i(),u(y,{key:2},[l(c,{color:"primary",onClick:e[1]||(e[1]=o=>_.value=!0)},{default:n(()=>[l(v,{name:"local_shipping",class:"mr-2"}),e[18]||(e[18]=d(" Ship Order ",-1))]),_:1}),l(c,{color:"danger",onClick:b},{default:n(()=>[...e[19]||(e[19]=[d("Cancel",-1)])]),_:1})],64)):t.value.status===3?(i(),j(c,{key:3,color:"success",onClick:M},{default:n(()=>[l(v,{name:"check_circle",class:"mr-2"}),e[20]||(e[20]=d(" Mark Delivered ",-1))]),_:1})):p("",!0)])]),_:1})]),_:1}),l(z,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=o=>_.value=o),title:"Ship Order"},{footer:n(()=>[l(c,{onClick:e[3]||(e[3]=o=>_.value=!1)},{default:n(()=>[...e[22]||(e[22]=[d("Cancel",-1)])]),_:1}),l(c,{color:"primary",onClick:$},{default:n(()=>[...e[23]||(e[23]=[d("Confirm Ship",-1)])]),_:1})]),default:n(()=>[l(U,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=o=>k.value=o),label:"Tracking Number",class:"mb-4"},null,8,["modelValue"])]),_:1},8,["modelValue"])])):(i(),u("div",ye,[l(K,{indeterminate:""})]))}}}),Oe=Z(ke,[["__scopeId","data-v-ab3ef275"]]);export{Oe as default};
