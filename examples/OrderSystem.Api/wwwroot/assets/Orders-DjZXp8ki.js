import{k as C,r as v,G as w,v as o,C as s,z as n,L as f,n as I,a4 as N,u as O,ac as S,F as m,D as y,d as z,x as b,y as D,o as a}from"./vue-D6N10Y6x.js";import{u as L}from"./order-BnhFdJ91.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"orders"},A={class:"orders-header"},B=["disabled"],$={key:0,class:"empty"},F={key:1,class:"order-list"},M={class:"order-header"},T={class:"order-id"},E={class:"order-items"},G={class:"item-name"},P={class:"item-qty"},R={class:"item-price"},X={class:"order-footer"},j={class:"order-info"},H={class:"order-actions"},J={class:"order-total"},K=["onClick"],Q=["onClick"],U=C({__name:"Orders",setup(W){const g=S(),u=L(),d=v([]),r=v(!1),p={0:{text:"待支付",color:"#f59e0b",bg:"#fef3c7"},1:{text:"已支付",color:"#3b82f6",bg:"#dbeafe"},2:{text:"处理中",color:"#8b5cf6",bg:"#ede9fe"},3:{text:"已发货",color:"#06b6d4",bg:"#cffafe"},4:{text:"已完成",color:"#22c55e",bg:"#dcfce7"},5:{text:"已取消",color:"#ef4444",bg:"#fee2e2"}},i=async()=>{r.value=!0;try{d.value=await u.fetchOrders()}finally{r.value=!1}},k=async c=>{await u.payOrder(c,"Alipay","TX-"+Date.now()),await i()},h=async c=>{await u.cancelOrder(c,"用户取消"),await i()},x=c=>new Date(c).toLocaleString("zh-CN");return w(i),(c,t)=>{const _=N("va-icon");return a(),o("div",q,[s("div",A,[s("div",null,[t[1]||(t[1]=s("h1",null,"我的订单",-1)),s("p",null,"共 "+n(d.value.length)+" 个订单",1)]),s("button",{class:"refresh-btn",onClick:i,disabled:r.value},[f(_,{name:r.value?"sync":"refresh",class:I({spin:r.value})},null,8,["name","class"])],8,B)]),d.value.length===0&&!r.value?(a(),o("div",$,[f(_,{name:"inbox",size:"4rem",color:"secondary"}),t[3]||(t[3]=s("h2",null,"暂无订单",-1)),t[4]||(t[4]=s("p",null,"快去选购心仪的商品吧",-1)),s("button",{class:"primary-btn",onClick:t[0]||(t[0]=e=>O(g).push("/"))},[f(_,{name:"store"}),t[2]||(t[2]=s("span",null,"去购物",-1))])])):(a(),o("div",F,[(a(!0),o(m,null,y(d.value,e=>(a(),o("div",{key:e.orderId,class:"order-card"},[s("div",M,[s("div",T,[t[5]||(t[5]=s("span",null,"订单号",-1)),s("code",null,n(e.orderId),1)]),s("span",{class:"status",style:z({color:p[e.status]?.color,background:p[e.status]?.bg})},n(p[e.status]?.text),5)]),s("div",E,[(a(!0),o(m,null,y(e.items,l=>(a(),o("div",{key:l.productId,class:"order-item"},[s("span",G,n(l.productName),1),s("span",P,"×"+n(l.quantity),1),s("span",R,"¥"+n(((l.unitPrice||0)*(l.quantity||0)).toLocaleString()),1)]))),128))]),s("div",X,[s("div",j,[s("span",null,"下单时间: "+n(x(e.createdAt)),1)]),s("div",H,[s("span",J,[t[6]||(t[6]=D("合计: ",-1)),s("strong",null,"¥"+n(e.totalAmount?.toLocaleString()),1)]),e.status===0?(a(),o("button",{key:0,class:"pay-btn",onClick:l=>k(e.orderId)},"立即支付",8,K)):b("",!0),e.status<3?(a(),o("button",{key:1,class:"cancel-btn",onClick:l=>h(e.orderId)},"取消订单",8,Q)):b("",!0)])])]))),128))]))])}}}),ts=V(U,[["__scopeId","data-v-53a5c557"]]);export{ts as default};
