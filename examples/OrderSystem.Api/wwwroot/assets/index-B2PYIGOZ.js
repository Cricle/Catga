const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Shop-CD0vsucQ.js","assets/vue-DxbRKzch.js","assets/vuestic-BlKE5WT7.js","assets/vuestic-D3AENMiY.css","assets/Cart-BZh4wV8H.js","assets/Checkout-BexG9TV8.js","assets/order-Cp0QkwRJ.js","assets/index-Ca5JJS8k.js","assets/index-B9ygI19o.js","assets/MyOrders-DOCSMjQ3.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/MyOrders-DC70YwSk.css","assets/Dashboard-BD1t77L6.js","assets/Dashboard-CEQJ0cPn.css","assets/Orders-ZIbf571s.js","assets/Orders-D-AzowRR.css","assets/Observability-CBet40wF.js","assets/HotReload-lJeEjduf.js","assets/ReadModelSync-CPgLMxhq.js","assets/Settings-DSO1GXbZ.js","assets/Settings-DzYu-rwF.css"])))=>i.map(i=>d[i]);
import{ab as $,r as k,a as b,k as B,ac as U,c as E,w as i,a4 as m,ad as F,o as g,L as r,q as W,F as j,D as H,u as y,v as L,x as A,t as D,C as z,ae as K,af as Q,ag as G,ah as J}from"./vue-DxbRKzch.js";import{c as X}from"./vuestic-BlKE5WT7.js";(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))h(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&h(c)}).observe(document,{childList:!0,subtree:!0});function f(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(e){if(e.ep)return;e.ep=!0;const a=f(e);fetch(e.href,a)}})();const Y=$("cart",()=>{const s=k([]),_=b(()=>s.value.reduce((o,t)=>o+t.quantity,0)),f=b(()=>s.value.reduce((o,t)=>o+t.price*t.quantity,0)),h=b(()=>s.value.length===0);function e(o){const t=s.value.find(n=>n.productId===o.id);t?t.quantity++:s.value.push({productId:o.id,name:o.name,price:o.price,quantity:1,image:o.image})}function a(o){const t=s.value.findIndex(n=>n.productId===o);t>-1&&s.value.splice(t,1)}function c(o,t){const n=s.value.find(l=>l.productId===o);n&&(t<=0?a(o):n.quantity=t)}function u(){s.value=[]}return{items:s,count:_,total:f,isEmpty:h,addItem:e,removeItem:a,updateQuantity:c,clear:u}}),Z=B({__name:"App",setup(s){const _=F(),f=U(),h=Y(),e=b(()=>f.path.startsWith("/admin")),a=[{title:"商品",icon:"store",to:"/"},{title:"购物车",icon:"shopping_cart",to:"/cart"},{title:"我的订单",icon:"receipt_long",to:"/my-orders"}],c=[{title:"仪表盘",icon:"dashboard",to:"/admin"},{title:"订单管理",icon:"list_alt",to:"/admin/orders"},{title:"可观测性",icon:"monitoring",to:"/admin/observability"},{title:"热重载",icon:"autorenew",to:"/admin/hotreload"},{title:"读模型同步",icon:"sync",to:"/admin/readmodelsync"},{title:"系统设置",icon:"settings",to:"/admin/settings"}],u=b(()=>e.value?c:a),o=k(!0);return(t,n)=>{const l=m("va-icon"),d=m("va-button"),P=m("va-navbar-item"),I=m("va-badge"),T=m("va-navbar"),V=m("va-sidebar-item-title"),C=m("va-sidebar-item-content"),R=m("va-sidebar-item"),w=m("va-divider"),x=m("va-sidebar"),N=m("router-view"),M=m("va-scroll-container"),q=m("va-app-layout");return g(),E(q,null,{top:i(()=>[r(T,{color:e.value?"primary":"background-secondary"},{left:i(()=>[r(d,{preset:"secondary",onClick:n[0]||(n[0]=v=>o.value=!o.value)},{default:i(()=>[r(l,{name:"menu"})]),_:1}),r(P,{class:"ml-3"},{default:i(()=>[z("strong",null,A(e.value?"OrderSystem Admin":"OrderSystem"),1)]),_:1})]),right:i(()=>[e.value?D("",!0):(g(),E(d,{key:0,preset:"secondary",onClick:n[1]||(n[1]=v=>y(_).push("/cart")),class:"mr-2"},{default:i(()=>[r(l,{name:"shopping_cart"}),y(h).count>0?(g(),E(I,{key:0,text:String(y(h).count),color:"danger",overlap:""},null,8,["text"])):D("",!0)]),_:1})),r(d,{preset:"secondary",onClick:n[2]||(n[2]=v=>y(_).push(e.value?"/":"/admin")),class:"mr-2"},{default:i(()=>[r(l,{name:e.value?"store":"admin_panel_settings",class:"mr-1"},null,8,["name"]),L(" "+A(e.value?"商城":"管理"),1)]),_:1}),r(d,{preset:"secondary",href:"https://github.com/Cricle/Catga",target:"_blank"},{default:i(()=>[r(l,{name:"code"})]),_:1})]),_:1},8,["color"])]),left:i(()=>[r(x,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=v=>o.value=v),"minimized-width":"0"},{default:i(()=>[(g(!0),W(j,null,H(u.value,v=>(g(),E(R,{key:v.to,active:y(f).path===v.to,onClick:re=>y(_).push(v.to)},{default:i(()=>[r(C,null,{default:i(()=>[r(l,{name:v.icon},null,8,["name"]),r(V,null,{default:i(()=>[L(A(v.title),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128)),r(w),r(R,{onClick:n[3]||(n[3]=v=>y(_).push(e.value?"/":"/admin"))},{default:i(()=>[r(C,null,{default:i(()=>[r(l,{name:e.value?"store":"admin_panel_settings"},null,8,["name"]),r(V,null,{default:i(()=>[L(A(e.value?"返回商城":"管理后台"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),content:i(()=>[r(M,{vertical:"",class:"app-content"},{default:i(()=>[r(N)]),_:1})]),_:1})}}}),ee="modulepreload",te=function(s){return"/"+s},S={},p=function(_,f,h){let e=Promise.resolve();if(f&&f.length>0){let o=function(t){return Promise.all(t.map(n=>Promise.resolve(n).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");e=o(f.map(t=>{if(t=te(t),t in S)return;S[t]=!0;const n=t.endsWith(".css"),l=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const d=document.createElement("link");if(d.rel=n?"stylesheet":ee,n||(d.as="script"),d.crossOrigin="",d.href=t,u&&d.setAttribute("nonce",u),document.head.appendChild(d),n)return new Promise((P,I)=>{d.addEventListener("load",P),d.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${t}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return e.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return _().catch(a)})},ne=[{path:"/",name:"Shop",component:()=>p(()=>import("./Shop-CD0vsucQ.js"),__vite__mapDeps([0,1,2,3]))},{path:"/cart",name:"Cart",component:()=>p(()=>import("./Cart-BZh4wV8H.js"),__vite__mapDeps([4,1,2,3]))},{path:"/checkout",name:"Checkout",component:()=>p(()=>import("./Checkout-BexG9TV8.js"),__vite__mapDeps([5,1,6,7,8,2,3]))},{path:"/my-orders",name:"MyOrders",component:()=>p(()=>import("./MyOrders-DOCSMjQ3.js"),__vite__mapDeps([9,1,6,7,8,10,11]))},{path:"/my-orders/:id",name:"MyOrderDetail",component:()=>p(()=>import("./MyOrders-DOCSMjQ3.js"),__vite__mapDeps([9,1,6,7,8,10,11]))},{path:"/admin",name:"AdminDashboard",component:()=>p(()=>import("./Dashboard-BD1t77L6.js"),__vite__mapDeps([12,6,1,7,8,10,13]))},{path:"/admin/orders",name:"AdminOrders",component:()=>p(()=>import("./Orders-ZIbf571s.js"),__vite__mapDeps([14,6,1,7,8,10,15]))},{path:"/admin/orders/:id",name:"AdminOrderDetail",component:()=>p(()=>import("./Orders-ZIbf571s.js"),__vite__mapDeps([14,6,1,7,8,10,15]))},{path:"/admin/observability",name:"AdminObservability",component:()=>p(()=>import("./Observability-CBet40wF.js"),__vite__mapDeps([16,7,8,1]))},{path:"/admin/hotreload",name:"AdminHotReload",component:()=>p(()=>import("./HotReload-lJeEjduf.js"),__vite__mapDeps([17,7,8,1]))},{path:"/admin/readmodelsync",name:"AdminReadModelSync",component:()=>p(()=>import("./ReadModelSync-CPgLMxhq.js"),__vite__mapDeps([18,7,8,1]))},{path:"/admin/settings",name:"AdminSettings",component:()=>p(()=>import("./Settings-DSO1GXbZ.js"),__vite__mapDeps([19,8,1,10,20]))}],oe=K({history:Q(),routes:ne}),O=G(Z);O.use(J());O.use(oe);O.use(X());O.mount("#app");export{Y as u};
