import{ah as W,r as w,a as f}from"./vue-C5tvXR9f.js";import{a as x}from"./_plugin-vue_export-helper-BREQrZf2.js";const s=x.create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),i={async getOrders(a,e=100){const n=new URLSearchParams;a!==void 0&&n.append("status",String(a)),e&&n.append("limit",String(e));const{data:c}=await s.get(`/orders?${n}`);return c},async getOrder(a){const{data:e}=await s.get(`/orders/${a}`);return e},async getCustomerOrders(a){const{data:e}=await s.get(`/orders/customer/${a}`);return e},async getStats(){const{data:a}=await s.get("/orders/stats");return a},async createOrder(a,e){const{data:n}=await s.post("/orders",{customerId:a,items:e});return n},async createOrderWithFlow(a,e){const{data:n}=await s.post("/orders/flow",{customerId:a,items:e});return n},async payOrder(a,e,n){await s.post(`/orders/${a}/pay`,{paymentMethod:e,transactionId:n})},async processOrder(a){await s.post(`/orders/${a}/process`,{})},async shipOrder(a,e){await s.post(`/orders/${a}/ship`,{trackingNumber:e})},async deliverOrder(a){await s.post(`/orders/${a}/deliver`,{})},async cancelOrder(a,e){await s.post(`/orders/${a}/cancel`,{reason:e})},async getHealth(){const{data:a}=await s.get("/health");return a},async getSystemInfo(){const{data:a}=await s.get("/system/info");return a}},R=W("order",()=>{const a=w([]),e=w(null),n=w(null),c=w(!1),u=w(null),p=f(()=>a.value.filter(t=>t.status===0)),O=f(()=>a.value.filter(t=>t.status>=1&&t.status<=3));async function y(t=100,r){c.value=!0,u.value=null;try{return a.value=await i.getOrders(r,t),a.value}catch(l){return u.value=l.message,[]}finally{c.value=!1}}async function o(){try{return e.value=await i.getStats(),e.value}catch(t){return console.error("Failed to fetch stats:",t),null}}async function d(t){c.value=!0;try{n.value=await i.getOrder(t)}catch(r){u.value=r.message}finally{c.value=!1}}async function v(t){c.value=!0;try{const r=await i.createOrder(t.customerId,t.items);return await y(),await o(),r}catch(r){throw u.value=r.message,r}finally{c.value=!1}}async function h(t,r){c.value=!0;try{const l=await i.createOrderWithFlow(t,r);return await y(),await o(),l}catch(l){throw u.value=l.message,l}finally{c.value=!1}}async function g(t,r,l){await i.payOrder(t,r,l),await d(t),await o()}async function m(t){await i.processOrder(t),await d(t),await o()}async function S(t,r){await i.shipOrder(t,r),await d(t),await o()}async function $(t){await i.deliverOrder(t),await d(t),await o()}async function F(t,r){await i.cancelOrder(t,r),await d(t),await o()}return{orders:a,stats:e,currentOrder:n,loading:c,error:u,pendingOrders:p,activeOrders:O,fetchOrders:y,fetchStats:o,fetchOrder:d,createOrder:v,createOrderWithFlow:h,payOrder:g,processOrder:m,shipOrder:S,deliverOrder:$,cancelOrder:F}});export{R as u};
